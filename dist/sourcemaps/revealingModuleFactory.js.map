{"version":3,"sources":["revealingModuleFactory.js"],"names":["revealingModuleFactory","defineEnumPropValue","onObj","propName","value","Object","defineProperty","enumerable","unConfigurableNamespace","nsString","obj","valueToSet","shouldSetValue","_typeof","_undefined","agg","key","ind","parts","length","ObjHasOwnProperty","reduce","isPopulatedNsString","revealingModule","isPopulatedValue","name"],"mappings":"qeAAIA,uBAA0B,WAiB9B,QAASC,GAAqBC,EAAOC,EAAUC,GAC3C,MAAOC,QAAOC,eAAeJ,EAAOC,GAChCC,MAAOA,EACPG,YAAY,IAYpB,QAASC,GAAyBC,EAAUC,EAAKC,GAC7C,GAAMC,IAAiB,SAAOD,EAAP,YAAAE,QAAOF,MAAeG,CADjD,OAAAL,GAASD,MAAAA,KAAAA,OAAyBC,SAAAA,EAAAA,EAAUC,EAAKC,GAC7C,GAAMC,GAAiBG,EAAOJ,eAAPK,EAYlB,OAPGC,KAAQC,EAAMC,OAAS,GAH/BP,IAAAQ,EACAnB,EAAsBc,EAAKM,EAAOV,GAE1BM,QAAQC,EAAAA,MAAAJ,GAERb,GACHA,EACec,EAAIC,MAGnBD,EAAAC,IACDN,GAwCR,QAASV,KAAT,MAAA,SAASA,GAATS,EAAmCL,GAC/B,GAAAkB,IAAgBC,SAAiBd,EAAjBc,YAAAA,QAAiBd,MAAUL,EACvCoB,GAAIF,SAAsBlB,EAAtBkB,YAAAA,QAAsBlB,MAAOK,CAAjC,OAAAa,KACuBE,EACnBF,EAAwBE,EAAAA,IACxBF,GAAOd,GACVA,EACQc,EAAuBE,EAA3BpB,GACDI,IA3FZ,GAAAM,GAAA,WAkGAb,OAHCA,GAAAD,EAAAQ,EAAAiB,KAAAjB,GAGDP,EAAoBD,EAAwBC,EAAoBwB,KAAMxB,GAAtEA","file":"../revealingModuleFactory.js","sourcesContent":["var revealingModuleFactory = (function () {\n'use strict';\n\n/**\r\n * Created by elyde on 3/11/2017.\r\n */\r\n\r\nconst _undefined = 'undefined';\r\n\r\n/**\r\n * Sets an enumerable property (with value) on an object.\r\n * @function defineEnumPropValue\r\n * @param onObj {Object}\r\n * @param propName {String}\r\n * @param value {*}\r\n * @returns {Object}\r\n */\r\nfunction defineEnumPropValue (onObj, propName, value) {\r\n    return Object.defineProperty(onObj, propName, {\r\n        value: value,\r\n        enumerable: true\r\n    });\r\n}\r\n\r\n/**\r\n * Sets an un-configurable namespace on an object with optional value at the end of the namespace.\r\n * @note Copied directly from `sjljs`.\r\n * @param nsString {String} - Namespace or namespace-string to set on `obj`.\r\n * @param obj {Object} - Object to add un-configurable namespace on.\r\n * @param [valueToSet=undefined] {*} - Value to set.  Optional.  Default `undefined`.\r\n * @returns {*} - Object that was passed in.\r\n */\r\nfunction unConfigurableNamespace (nsString, obj, valueToSet)  {\r\n    const shouldSetValue = typeof valueToSet !== _undefined;\r\n\r\n    // Reduce original object to itself with requested modifications\r\n    return nsString.split('.').reduce((agg, key, ind, parts) => {\r\n        const ObjHasOwnProperty = agg.hasOwnProperty(key);\r\n        if (ind === parts.length - 1 &&\r\n            shouldSetValue && !ObjHasOwnProperty) {\r\n            defineEnumPropValue(agg, key, valueToSet);\r\n        }\r\n        else if (typeof agg[key] === _undefined &&\r\n            !ObjHasOwnProperty) {\r\n            defineEnumPropValue(agg, key, {});\r\n        }\r\n        return agg[key];\r\n    }, obj);\r\n}\r\n\r\n/**\r\n * Revealing module function.  Returns itself if being called as a setter or stored\r\n *  member/namespace if one is found.\r\n * @function revealingModule\r\n * @param nsString {String} - Name of module to store/get or namespace string which can also include module name to get/set at end.\r\n * @param [value=undefined] {*} - Value to set on module (revealing module function).\r\n * @returns {*} - Self or found namespace/module.\r\n */\r\n\r\n/**\r\n * Revealing module factory.  Returns a revealing module function which in turn allows you to set\r\n * modules on it via namespace strings.  Also note module namespaces are set as not `writable` and not `configurable`\r\n * via `Object.defineProperty` - This makes your namespaces harder to tamper with;  E.g.,\r\n * ```\r\n *   var myModule = revealingModuleFactory();\r\n\r\n *   // Some values to work with\r\n *   function Hello () {}\r\n *   function SomeMember () {}\r\n *\r\n *   myModule('some.namespace.Hello', Hello);\r\n *   myModule('SomeMember', SomeMember);\r\n *   myModule.SomeMember === SomeMember;        // `true`\r\n *   myModule.some.namespace.Hello === Hello;   // `true`\r\n *\r\n *   // Error is thrown here as property is not `writable` and\r\n *   // property is not `configurable` or in essence protected.\r\n *   myModule.SomeMember = Hello;\r\n *\r\n * ```\r\n *\r\n * @function revealingModuleFactory\r\n * @module revealingModuleFactory\r\n * @param [freeze=false] {Boolean} - Flag for freezing your modules once they are set.\r\n * @returns {revealingModule} - Revealing module function (store members on itself and makes them un-'configurable' (as propert(y|ies))).\r\n */\r\nfunction revealingModuleFactory () {\r\n    return function revealingModule (nsString, value) {\r\n        var isPopulatedNsString = typeof nsString !== _undefined,\r\n            isPopulatedValue = typeof value !== _undefined;\r\n        if (isPopulatedNsString && !isPopulatedValue) { // Call as a setter-getter\r\n            return unConfigurableNamespace(nsString, revealingModule); // returns last set namespace object\r\n        }\r\n        else if (isPopulatedNsString && isPopulatedValue) { // Call as a setter\r\n            unConfigurableNamespace(nsString, revealingModule, value); // sets value on namespace\r\n        }\r\n        return revealingModule;\r\n    };\r\n}\r\n\r\ndefineEnumPropValue(revealingModuleFactory, unConfigurableNamespace.name, unConfigurableNamespace);\r\ndefineEnumPropValue(revealingModuleFactory, defineEnumPropValue.name, defineEnumPropValue);\n\nreturn revealingModuleFactory;\n\n}());\n"]}